(this["webpackJsonpsnake-react-game"]=this["webpackJsonpsnake-react-game"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(14),c=a.n(n),r=(a(94),a(39)),o=a(42),l=a(61),d=a(62),u=a(81),h=a(80),S=a(63),j=a.n(S),b=a(50),O=a.n(b),_=a(37),m=a.n(_),p={SIZE:4,SPEED:150,HARD_MODE_DELIMITER:3,SPEED_FAST:50,SPEED_STEP:10,MAX_POSITION:98,MIN_POSITION:1,TOP:"TOP",RIGHT:"RIGHT",LEFT:"LEFT",BOTTOM:"BOTTOM",SPACE_BETWEEN_SNAKE_PIECES:2,STARTING_SNAKE_POSITION:[[0,0],[2,0],[4,0]],LARGE_FIELD_STARTING_SNAKE_POSITION:[[0,0],[1,0],[2,0]],FRUIT_POSITION:function(){return[Math.floor((Math.random()*p.MAX_POSITION+p.MIN_POSITION)/p.SIZE)*p.SIZE,Math.floor((Math.random()*p.MAX_POSITION+p.MIN_POSITION)/p.SIZE)*p.SIZE]}},g=p,f=a(2),E=function(e){return Object(f.jsx)("div",{children:e.snakePosition.map((function(t,a,s){var i={left:"".concat(t[0],"%"),top:"".concat(t[1],"%"),width:"".concat(e.size,"%"),height:"".concat(e.size,"%"),transform:"".concat(e.direction===g.LEFT?"rotate(90deg)":e.direction===g.TOP?"rotate(180deg)":e.direction===g.RIGHT?"rotate(270deg)":"rotate(0deg)")};return a===s.length-1?Object(f.jsx)("div",{className:"".concat(m.a.snake__piece," ").concat(m.a.snake__head," ").concat(e.isGameOver?m.a.snake__head_dead:""),style:i},a):Object(f.jsx)("div",{className:m.a.snake__piece,style:i},a)}))})},I=a(64),x=a.n(I),v=a.p+"static/media/apple-compressed.33c1eec7.svg",k=a.p+"static/media/banana-compressed.2307fede.svg",P=function(e){var t={left:"".concat(e.fruitPosition[0],"%"),top:"".concat(e.fruitPosition[1],"%"),width:"".concat(e.size,"%"),height:"".concat(e.size,"%"),backgroundImage:"url(".concat(e.isBanana?k:v,")")};return Object(f.jsx)("div",{className:x.a.fruit,style:t})},T=a(55),N=a.n(T),y=a(132),F=a(48),G=a.n(F),A=a(75),H=a.n(A),w=a(77),C=a.n(w),L=a(76),B=a.n(L),M=a(24),D=a(127),R=a(134),V=a(74),K=a.n(V),W=a(31),J=a(82),Z=a(137),U=a(135),z=a(131),X=a(133),q=a(22),Y=a.n(q),Q=function(){return Object(f.jsxs)("ul",{className:Y.a.list,children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"LEFT:"})," left arrow \\ A"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"UP:"})," up arrow \\ W"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"RIGHT:"})," right arrow \\ D"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"DOWN:"})," down arrow \\ S"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"PAUSE:"})," space"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:Y.a.key,children:"TURBO:"})," hold move button"]})]})},$=i.a.createContext({bestScore:0,audioVolumeHandler:function(){},audioVolume:0,lastScores:0,hardModeHandler:function(){},isHard:!1,foodIconSwitchHandler:function(){},isBanana:!1,fieldSwitchHandler:function(){},isFieldLarge:!1}),ee=a(130),te=a(128),ae=a(138),se=a(73),ie=a.n(se),ne=Object(D.a)({root:{width:200}});function ce(){var e=ne(),t=Object(s.useContext)($),a=i.a.useState(parseInt(t.audioVolume)),n=Object(M.a)(a,2),c=n[0],r=n[1];return Object(f.jsxs)("div",{className:e.root,children:[Object(f.jsx)(te.a,{style:{marginBottom:0,fontWeight:"bold"},id:"continuous-slider",gutterBottom:!0,children:"Volume:"}),Object(f.jsxs)(ee.a,{container:!0,spacing:2,children:[Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)(ie.a,{})}),Object(f.jsx)(ee.a,{item:!0,xs:!0,children:Object(f.jsx)(ae.a,{value:c,onChange:function(e,a){r(a),t.audioVolumeHandler(a),localStorage.setItem("audioVolume",a)},"aria-labelledby":"continuous-slider"})}),Object(f.jsx)(ee.a,{item:!0,children:Object(f.jsx)(G.a,{})})]})]})}var re=a(136);function oe(){var e=Object(s.useContext)($);return Object(f.jsx)("div",{children:Object(f.jsx)(re.a,{checked:e.isHard,onChange:e.hardModeHandler,color:"primary",name:"isHard",inputProps:{"aria-label":"primary checkbox"}})})}function le(){var e=Object(s.useContext)($);return Object(f.jsx)("div",{children:Object(f.jsx)(re.a,{checked:e.isBanana,onChange:e.foodIconSwitchHandler,color:"primary",name:"isBanana",inputProps:{"aria-label":"primary checkbox"}})})}function de(){var e=Object(s.useContext)($);return Object(f.jsx)("div",{children:Object(f.jsx)(re.a,{checked:e.isFieldLarge,onChange:e.fieldSwitchHandler,color:"primary",name:"isFieldLarge",inputProps:{"aria-label":"primary checkbox"}})})}function ue(e){var t=e.children,a=e.value,s=e.index,i=Object(J.a)(e,["children","value","index"]);return Object(f.jsx)("div",Object(W.a)(Object(W.a)({role:"tabpanel",hidden:a!==s,id:"scrollable-auto-tabpanel-".concat(s),"aria-labelledby":"scrollable-auto-tab-".concat(s)},i),{},{children:a===s&&Object(f.jsx)(X.a,{div:3,children:Object(f.jsx)("div",{children:t})})}))}function he(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var Se=Object(D.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper}}}));function je(e){var t=Se(),a=i.a.useState(0),n=Object(M.a)(a,2),c=n[0],r=n[1],o=Object(s.useContext)($),l=o.lastScores.map((function(e){return e})).reverse();return Object(f.jsxs)("div",{className:t.root,children:[Object(f.jsx)(Z.a,{position:"static",color:"default",children:Object(f.jsxs)(U.a,{value:c,onChange:function(e,t){r(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",children:[Object(f.jsx)(z.a,Object(W.a)({label:"Settings"},he(0))),Object(f.jsx)(z.a,Object(W.a)({label:"Score Statistic"},he(1))),Object(f.jsx)(z.a,Object(W.a)({label:"Hot Keys"},he(2)))]})}),Object(f.jsx)(ue,{value:c,index:0,children:Object(f.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(f.jsx)(ce,{}),Object(f.jsx)("p",{style:{marginBottom:0,fontWeight:"bold"},children:"Game Settings:"}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("span",{children:"Normal"}),Object(f.jsx)(oe,{}),Object(f.jsx)("span",{children:"Hard"})]}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("span",{children:"Apple"}),Object(f.jsx)(le,{}),Object(f.jsx)("span",{children:"Banana"})]}),Object(f.jsx)("p",{style:{marginBottom:0,fontWeight:"bold"},children:"Field Size:"}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("span",{children:"Normal"}),Object(f.jsx)(de,{}),Object(f.jsx)("span",{children:"Large"})]})]})}),Object(f.jsxs)(ue,{value:c,index:1,children:[Object(f.jsxs)("h3",{children:["Best Score: ",o.bestScore]}),Object(f.jsx)("h3",{children:"10 Last Scores:"}),Object(f.jsx)("ul",{children:l.map((function(e,t){return Object(f.jsxs)("li",{children:[t+1,")"," ",e]},t)}))})]}),Object(f.jsx)(ue,{value:c,index:2,children:Object(f.jsx)(Q,{})})]})}function be(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var Oe=Object(D.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #1166aa",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function _e(e){var t=Oe(),a=i.a.useState(be),s=Object(M.a)(a,1)[0],n=i.a.useState(!1),c=Object(M.a)(n,2),r=c[0],o=c[1],l=Object(f.jsx)("div",{style:s,className:t.paper,children:Object(f.jsx)(je,{})});return Object(f.jsxs)("div",{children:[Object(f.jsx)(y.a,{variant:"contained",color:"primary",type:"button",onClick:function(e){e.target.closest("button").blur(),o(!0)},children:Object(f.jsx)(K.a,{style:{color:"white"}})}),Object(f.jsx)(R.a,{open:r,onClose:function(){o(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:l})]})}var me=a(79),pe=a.n(me),ge=a(78),fe=a.n(ge),Ee=function(e){var t=e.isVolume?Object(f.jsx)(G.a,{style:{color:"white"}}):Object(f.jsx)(H.a,{style:{color:"white"}}),a=e.isMusic?Object(f.jsx)(B.a,{style:{color:"white"}}):Object(f.jsx)(C.a,{style:{color:"white"}}),s=e.isFullScreen?Object(f.jsx)(fe.a,{}):Object(f.jsx)(pe.a,{});return Object(f.jsxs)("div",{className:N.a.controls__wrapper,children:[Object(f.jsxs)("div",{className:N.a.controls__score,children:["Score: ",e.score]}),Object(f.jsx)(y.a,{variant:"contained",color:"primary",onClick:e.clicked,children:"Play"}),e.isFullScreen?null:Object(f.jsx)(y.a,{variant:"contained",color:"primary",onClick:e.volumeToggle,children:t}),e.isFullScreen?null:Object(f.jsx)(y.a,{variant:"contained",color:"primary",onClick:e.musicToggle,children:a}),Object(f.jsx)(y.a,{variant:"contained",color:"primary",onClick:e.goFullScreen,children:s}),e.isFullScreen?null:Object(f.jsx)(_e,{style:{width:"100%",height:"100%"}})]})},Ie=a.p+"static/media/bite.1e6ccb0d.mp3",xe=a(56),ve=a.n(xe),ke=function(e){return Object(f.jsx)("div",{className:ve.a.music,style:e.isMusic?{display:"block"}:{display:"none"},children:Object(f.jsx)("iframe",{title:"music",width:"100%",height:"100%",src:"https://www.youtube.com/embed/DIi-pBpXIbE",frameBorder:"0",allow:"accelerometer; autoplay;",allowFullScreen:!0,className:ve.a.music__player})})},Pe=a(38),Te=a.n(Pe),Ne=a.p+"static/media/rs_school_js.d7e49236.svg",ye=function(){return Object(f.jsxs)("div",{className:Te.a.footer,children:[Object(f.jsx)("a",{className:Te.a.footer__link,href:"https://github.com/Rrroman",children:"Created by Roman 2021"}),Object(f.jsx)("a",{className:Te.a.footer__link,href:"https://rs.school/js/",children:Object(f.jsx)("img",{className:Te.a.footer__logo,src:Ne,alt:"Rs School"})})]})},Fe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={snakePosition:g.STARTING_SNAKE_POSITION,direction:g.RIGHT,speed:g.SPEED,fruitPosition:g.FRUIT_POSITION(),isGameOver:!1,isGamePause:!0,score:0,bestScore:0,lastScores:[],isVolume:!0,isMusic:!1,isFullScreen:!1,isHard:!1,isBanana:!1,isFieldLarge:!1,audioVolume:100},e.audio=new Audio(Ie),e.goFullScreen=function(t){t.target.closest("button").blur(),e.setState((function(e){return{isFullScreen:!e.isFullScreen}}))},e.checkLocalStorage=function(t){var a=localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):e.state[t];return e.setState(Object(o.a)({},t,a)),a},e.moveSnake=function(){if(e.state.isGameOver){clearInterval(e.state.intervalId);var t=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:t,isGameOver:!1,speed:g.SPEED})}var a=Object(r.a)(e.state.snakePosition),s=a[a.length-1];switch(e.state.direction){case g.LEFT:s=[s[0]-(e.state.isFieldLarge?g.SPACE_BETWEEN_SNAKE_PIECES/2:g.SPACE_BETWEEN_SNAKE_PIECES),s[1]];break;case g.TOP:s=[s[0],s[1]-(e.state.isFieldLarge?g.SPACE_BETWEEN_SNAKE_PIECES/2:g.SPACE_BETWEEN_SNAKE_PIECES)];break;case g.RIGHT:s=[s[0]+(e.state.isFieldLarge?g.SPACE_BETWEEN_SNAKE_PIECES/2:g.SPACE_BETWEEN_SNAKE_PIECES),s[1]];break;case g.BOTTOM:s=[s[0],s[1]+(e.state.isFieldLarge?g.SPACE_BETWEEN_SNAKE_PIECES/2:g.SPACE_BETWEEN_SNAKE_PIECES)]}a.push(s),a.shift(),e.setState({snakePosition:a})},e.checkWallSmash=function(){var t=e.state.snakePosition[e.state.snakePosition.length-1];(t[0]<0||t[0]>=(e.state.isFieldLarge?100:g.MAX_POSITION)||t[1]<0||t[1]>=(e.state.isFieldLarge?100:g.MAX_POSITION))&&e.isGameOver()},e.checkSnakeBiteItSelf=function(){var t=Object(r.a)(e.state.snakePosition),a=t[t.length-1];t.pop(),t.forEach((function(t){a[0]===t[0]&&a[1]===t[1]&&e.isGameOver()}))},e.checkEatFruit=function(){var t=e.state.snakePosition[e.state.snakePosition.length-1],a=e.state.fruitPosition;if(t[0]===a[0]&&t[1]===a[1]){e.setState((function(t){return t.speed>g.SPEED_FAST?{fruitPosition:g.FRUIT_POSITION(),speed:t.speed-g.SPEED_STEP,score:e.state.snakePosition.length*g.SPEED_STEP}:{fruitPosition:g.FRUIT_POSITION(),speed:t.speed>1?t.speed-1:1,score:t.snakePosition.length*g.SPEED_STEP}})),clearInterval(e.state.intervalId);var s=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:s}),e.snakeGrow(),e.state.isVolume&&(e.audio.currentTime=0,e.audio.volume=e.state.audioVolume/100,e.audio.play())}},e.checkCurrentSpeed=function(t){var a=null;a=t?g.SPEED/g.HARD_MODE_DELIMITER:g.SPEED,e.setState({speed:a})},e.snakeGrow=function(){var t=Object(r.a)(e.state.snakePosition);t.unshift([]),e.setState({snakePosition:t})},e.isGamePauseToggle=function(){if(e.state.isGamePause)clearInterval(e.state.intervalId),e.setState({isGamePause:!0});else if(!e.state.isGamePause){var t=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:t,isGamePause:!1})}},e.isGameOver=function(){var t=Object(r.a)(e.state.lastScores);t.length>=10?(t.push(e.state.score),t.shift()):t.push(e.state.score),e.checkCurrentSpeed(e.state.isHard),e.setState({snakePosition:e.state.isFieldLarge?g.LARGE_FIELD_STARTING_SNAKE_POSITION:g.STARTING_SNAKE_POSITION,direction:g.RIGHT,isGameOver:!0,lastScores:t}),e.state.score>e.state.bestScore&&(localStorage.setItem("bestScore",JSON.stringify(e.state.score)),e.setState((function(e){return{bestScore:e.score}}))),localStorage.setItem("lastScores",JSON.stringify(t)),clearInterval(e.state.intervalId)},e.playGameHandler=function(t){if(t.target.closest("button").blur(),e.state.isGameOver||e.state.isGamePause){var a=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:a,isGameOver:!1,isGamePause:!1,score:0})}},e.volumeToggleHandler=function(t){t.target.closest("button").blur(),e.setState((function(e){return{isVolume:!e.isVolume}}))},e.audioVolumeHandler=function(t){e.setState({audioVolume:t}),localStorage.setItem("audioVolume",JSON.stringify(e.state.audioVolume))},e.musicToggleHandler=function(t){t.target.blur(),e.setState((function(e){return{isMusic:!e.isMusic}}))},e.hardModeHandler=function(t){t.target.blur(),e.setState({isHard:t.target.checked}),t.target.checked?(e.setState({speed:g.SPEED/g.HARD_MODE_DELIMITER}),localStorage.setItem("isHard",JSON.stringify(t.target.checked))):(e.setState({speed:g.SPEED}),localStorage.setItem("isHard",JSON.stringify(t.target.checked)))},e.foodIconSwitchHandler=function(t){e.setState({isBanana:t.target.checked}),t.target.checked?(e.setState({isBanana:!0}),localStorage.setItem("isBanana",JSON.stringify(t.target.checked))):(e.setState({isBanana:!1}),localStorage.setItem("isBanana",JSON.stringify(t.target.checked))),t.target.blur()},e.fieldSwitchHandler=function(t){t.target.blur(),e.setState({isFieldLarge:t.target.checked}),t.target.checked?(e.setState({isFieldLarge:!0,snakePosition:g.LARGE_FIELD_STARTING_SNAKE_POSITION}),localStorage.setItem("isFieldLarge",JSON.stringify(t.target.checked))):(e.setState({isFieldLarge:!1,snakePosition:g.STARTING_SNAKE_POSITION}),localStorage.setItem("isFieldLarge",JSON.stringify(t.target.checked)))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keydownHandler.bind(this)),this.checkLocalStorage("bestScore"),this.checkLocalStorage("audioVolume"),this.checkLocalStorage("lastScores"),this.checkLocalStorage("isHard"),this.checkLocalStorage("isBanana"),this.checkLocalStorage("isFieldLarge")&&this.setState({snakePosition:g.LARGE_FIELD_STARTING_SNAKE_POSITION}),this.checkCurrentSpeed(JSON.parse(localStorage.getItem("isHard")))}},{key:"componentDidUpdate",value:function(){this.checkWallSmash(),this.checkSnakeBiteItSelf(),this.checkEatFruit()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"keydownHandler",value:function(e){switch(e.keyCode){case 37:case 65:this.state.direction===g.RIGHT||this.state.isGamePause||this.state.isGameOver||(this.setDirection(g.LEFT),this.moveSnake());break;case 38:case 87:this.state.direction===g.BOTTOM||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:g.TOP}),this.moveSnake());break;case 39:case 68:this.state.direction===g.LEFT||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:g.RIGHT}),this.moveSnake());break;case 40:case 83:this.state.direction===g.TOP||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:g.BOTTOM}),this.moveSnake());break;case 32:this.setState((function(e){return{isGamePause:!e.isGamePause}})),this.isGamePauseToggle()}}},{key:"setDirection",value:function(e){this.setState({direction:e})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:O.a.app,children:[Object(f.jsxs)(j.a,{enabled:this.state.isFullScreen,onChange:function(t){return e.setState({isFullScreen:t})},children:[Object(f.jsx)($.Provider,{value:{bestScore:this.state.bestScore,audioVolumeHandler:this.audioVolumeHandler,audioVolume:this.state.audioVolume,lastScores:this.state.lastScores,hardModeHandler:this.hardModeHandler,isHard:this.state.isHard,foodIconSwitchHandler:this.foodIconSwitchHandler,isBanana:this.state.isBanana,fieldSwitchHandler:this.fieldSwitchHandler,isFieldLarge:this.state.isFieldLarge},children:Object(f.jsx)(Ee,{clicked:this.playGameHandler.bind(this),score:this.state.score,isVolume:this.state.isVolume,isMusic:this.state.isMusic,volumeToggle:this.volumeToggleHandler,musicToggle:this.musicToggleHandler,goFullScreen:this.goFullScreen.bind(this),isFullScreen:this.state.isFullScreen})}),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"".concat(O.a.app__field," ").concat(this.state.isFullScreen?O.a.app__fullScreen:null),children:[Object(f.jsx)(E,{snakePosition:this.state.snakePosition,direction:this.state.direction,isGameOver:this.state.isGameOver,size:this.state.isFieldLarge?g.SIZE/2:g.SIZE}),Object(f.jsx)(P,{fruitPosition:this.state.fruitPosition,size:this.state.isFieldLarge?g.SIZE/2:g.SIZE,isBanana:this.state.isBanana})]})})]}),Object(f.jsx)(ke,{isMusic:this.state.isMusic}),Object(f.jsx)(ye,{})]})}}]),a}(s.Component),Ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,140)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),i(e),n(e),c(e)}))};c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Fe,{})}),document.getElementById("root")),Ge()},22:function(e,t,a){e.exports={list:"Hotkeys_list__Mgljn",key:"Hotkeys_key__3R8tq"}},37:function(e,t,a){e.exports={snake__piece:"Snake_snake__piece__1ePKK",snake__head:"Snake_snake__head__Ibk3i",snake__head_dead:"Snake_snake__head_dead__31w_8"}},38:function(e,t,a){e.exports={footer:"Footer_footer__3qYAP",footer__logo:"Footer_footer__logo__kLW5G",footer__link:"Footer_footer__link__2pwZp"}},50:function(e,t,a){e.exports={app:"App_app__1fB2b",app__field:"App_app__field__1jCqw",app__fullScreen:"App_app__fullScreen__McoD_"}},55:function(e,t,a){e.exports={controls__wrapper:"Controls_controls__wrapper__3j6Y5",controls__score:"Controls_controls__score__2euP4"}},56:function(e,t,a){e.exports={music:"MusicPlayer_music__1vIjP",music__player:"MusicPlayer_music__player__1Dx2m"}},64:function(e,t,a){e.exports={fruit:"Fruit_fruit__32-aM"}},94:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.162c9165.chunk.js.map