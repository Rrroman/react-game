(this["webpackJsonpsnake-react-game"]=this["webpackJsonpsnake-react-game"]||[]).push([[0],{19:function(e,t,a){e.exports={list:"Hotkeys_list__Mgljn",key:"Hotkeys_key__3R8tq"}},35:function(e,t,a){e.exports={snake__piece:"Snake_snake__piece__1ePKK",snake__head:"Snake_snake__head__Ibk3i",snake__head_dead:"Snake_snake__head_dead__31w_8"}},36:function(e,t,a){e.exports={footer:"Footer_footer__3qYAP",footer__logo:"Footer_footer__logo__kLW5G",footer__link:"Footer_footer__link__2pwZp"}},49:function(e,t,a){e.exports={app:"App_app__1fB2b",app__field:"App_app__field__1jCqw",app__fullScreen:"App_app__fullScreen__McoD_"}},53:function(e,t,a){e.exports={controls__wrapper:"Controls_controls__wrapper__3j6Y5",controls__score:"Controls_controls__score__2euP4"}},54:function(e,t,a){e.exports={music:"MusicPlayer_music__1vIjP",music__player:"MusicPlayer_music__player__1Dx2m"}},62:function(e,t,a){e.exports={fruit:"Fruit_fruit__32-aM"}},91:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),o=a(14),n=a.n(o),c=(a(91),a(37)),r=a(59),l=a(60),u=a(78),d=a(77),j=a(61),h=a.n(j),b=a(49),O=a.n(b),m=a(35),_=a.n(m),S={SIZE:4,SPEED:150,SPEED_FAST:50,SPEED_STEP:10,MAX_POSITION:98,MIN_POSITION:1,TOP:"TOP",RIGHT:"RIGHT",LEFT:"LEFT",BOTTOM:"BOTTOM",SPACE_BETWEEN_SNAKE_PIECES:2,STARTING_SNAKE_POSITION:[[0,0],[2,0],[4,0]],FRUIT_POSITION:function(){return[Math.floor((Math.random()*S.MAX_POSITION+S.MIN_POSITION)/S.SIZE)*S.SIZE,Math.floor((Math.random()*S.MAX_POSITION+S.MIN_POSITION)/S.SIZE)*S.SIZE]}},p=S,f=a(2),v=function(e){return Object(f.jsx)("div",{children:e.snakePosition.map((function(t,a,s){var i={left:"".concat(t[0],"%"),top:"".concat(t[1],"%"),width:"".concat(e.size,"%"),height:"".concat(e.size,"%"),transform:"".concat(e.direction===p.LEFT?"rotate(90deg)":e.direction===p.TOP?"rotate(180deg)":e.direction===p.RIGHT?"rotate(270deg)":"rotate(0deg)")};return a===s.length-1?Object(f.jsx)("div",{className:"".concat(_.a.snake__piece," ").concat(_.a.snake__head," ").concat(e.isGameOver?_.a.snake__head_dead:""),style:i},a):Object(f.jsx)("div",{className:_.a.snake__piece,style:i},a)}))})},x=a(62),k=a.n(x),I=function(e){var t={left:"".concat(e.fruitPosition[0],"%"),top:"".concat(e.fruitPosition[1],"%"),width:"".concat(e.size,"%"),height:"".concat(e.size,"%")};return Object(f.jsx)("div",{className:k.a.fruit,style:t})},P=a(53),g=a.n(P),E=a(128),T=a(46),N=a.n(T),y=a(73),G=a.n(y),w=a(75),F=a.n(w),C=a(74),M=a.n(C),A=a(24),V=a(123),H=a(130),B=a(72),R=a.n(B),D=a(29),L=a(79),K=a(132),W=a(131),U=a(127),Z=a(129),z=a(19),X=a.n(z),J=function(){return Object(f.jsxs)("ul",{className:X.a.list,children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"LEFT:"})," left arrow \\ A"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"UP:"})," up arrow \\ W"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"RIGHT:"})," right arrow \\ D"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"DOWN:"})," down arrow \\ S"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"PAUSE:"})," space"]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{className:X.a.key,children:"TURBO:"})," hold move button"]})]})},q=i.a.createContext({bestScore:0,audioVolumeHandler:function(){},audioVolume:0,lastScores:0}),Y=a(126),Q=a(124),$=a(133),ee=a(71),te=a.n(ee),ae=Object(V.a)({root:{width:200}});function se(){var e=ae(),t=Object(s.useContext)(q),a=i.a.useState(parseInt(t.audioVolume)),o=Object(A.a)(a,2),n=o[0],c=o[1];return Object(f.jsxs)("div",{className:e.root,children:[Object(f.jsx)(Q.a,{id:"continuous-slider",gutterBottom:!0,children:"Volume"}),Object(f.jsxs)(Y.a,{container:!0,spacing:2,children:[Object(f.jsx)(Y.a,{item:!0,children:Object(f.jsx)(te.a,{})}),Object(f.jsx)(Y.a,{item:!0,xs:!0,children:Object(f.jsx)($.a,{value:n,onChange:function(e,a){c(a),t.audioVolumeHandler(a),localStorage.setItem("audioVolume",a)},"aria-labelledby":"continuous-slider"})}),Object(f.jsx)(Y.a,{item:!0,children:Object(f.jsx)(N.a,{})})]})]})}function ie(e){var t=e.children,a=e.value,s=e.index,i=Object(L.a)(e,["children","value","index"]);return Object(f.jsx)("div",Object(D.a)(Object(D.a)({role:"tabpanel",hidden:a!==s,id:"scrollable-auto-tabpanel-".concat(s),"aria-labelledby":"scrollable-auto-tab-".concat(s)},i),{},{children:a===s&&Object(f.jsx)(Z.a,{div:3,children:Object(f.jsx)("div",{children:t})})}))}function oe(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var ne=Object(V.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper}}}));function ce(e){var t=ne(),a=i.a.useState(0),o=Object(A.a)(a,2),n=o[0],c=o[1],r=Object(s.useContext)(q),l=r.lastScores.map((function(e){return e})).reverse();return Object(f.jsxs)("div",{className:t.root,children:[Object(f.jsx)(K.a,{position:"static",color:"default",children:Object(f.jsxs)(W.a,{value:n,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",children:[Object(f.jsx)(U.a,Object(D.a)({label:"Hot Keys"},oe(0))),Object(f.jsx)(U.a,Object(D.a)({label:"Score Statistic"},oe(1))),Object(f.jsx)(U.a,Object(D.a)({label:"Settings"},oe(2)))]})}),Object(f.jsx)(ie,{value:n,index:0,children:Object(f.jsx)(J,{})}),Object(f.jsxs)(ie,{value:n,index:1,children:[Object(f.jsxs)("h3",{children:["Best Score: ",r.bestScore]}),Object(f.jsx)("h3",{children:"10 Last Scores:"}),Object(f.jsx)("ul",{children:l.map((function(e,t){return Object(f.jsxs)("li",{children:[t+1,")"," ",e]},t)}))})]}),Object(f.jsx)(ie,{value:n,index:2,children:Object(f.jsx)("div",{style:{paddingTop:"20px"},children:Object(f.jsx)(se,{})})})]})}function re(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var le=Object(V.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #1166aa",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function ue(e){var t=le(),a=i.a.useState(re),s=Object(A.a)(a,1)[0],o=i.a.useState(!1),n=Object(A.a)(o,2),c=n[0],r=n[1],l=Object(f.jsx)("div",{style:s,className:t.paper,children:Object(f.jsx)(ce,{})});return Object(f.jsxs)("div",{children:[Object(f.jsx)(E.a,{variant:"contained",color:"primary",type:"button",onClick:function(e){e.target.blur(),r(!0)},children:Object(f.jsx)(R.a,{style:{color:"white"}})}),Object(f.jsx)(H.a,{open:c,onClose:function(){r(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:l})]})}var de=a(76),je=a.n(de),he=function(e){var t=e.isVolume?Object(f.jsx)(N.a,{style:{color:"white"}}):Object(f.jsx)(G.a,{style:{color:"white"}}),a=e.isMusic?Object(f.jsx)(M.a,{style:{color:"white"}}):Object(f.jsx)(F.a,{style:{color:"white"}});return Object(f.jsxs)("div",{className:g.a.controls__wrapper,children:[Object(f.jsxs)("div",{className:g.a.controls__score,children:["Score: ",e.score]}),Object(f.jsx)(E.a,{variant:"contained",color:"primary",onClick:e.clicked,children:"Start Game"}),Object(f.jsx)(E.a,{variant:"contained",color:"primary",onClick:e.volumeToggle,children:t}),e.isFull?null:Object(f.jsx)(E.a,{variant:"contained",color:"primary",onClick:e.musicToggle,children:a}),Object(f.jsx)(E.a,{variant:"contained",color:"primary",onClick:e.goFull,children:Object(f.jsx)(je.a,{})}),e.isFull?null:Object(f.jsx)(ue,{})]})},be=a.p+"static/media/bite.1e6ccb0d.mp3",Oe=a(54),me=a.n(Oe),_e=function(e){return Object(f.jsx)("div",{className:me.a.music,style:e.isMusic?{display:"block"}:{display:"none"},children:Object(f.jsx)("iframe",{title:"music",width:"100%",height:"100%",src:"https://www.youtube.com/embed/DIi-pBpXIbE",frameBorder:"0",allow:"accelerometer; autoplay;",allowFullScreen:!0,className:me.a.music__player})})},Se=a(36),pe=a.n(Se),fe=a.p+"static/media/rs_school_js.d7e49236.svg",ve=function(){return Object(f.jsxs)("div",{className:pe.a.footer,children:[Object(f.jsx)("a",{className:pe.a.footer__link,href:"https://github.com/Rrroman",children:"Created by Roman 2021"}),Object(f.jsx)("a",{className:pe.a.footer__link,href:"https://rs.school/js/",children:Object(f.jsx)("img",{className:pe.a.footer__logo,src:fe,alt:"Rs School"})})]})},xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={snakePosition:p.STARTING_SNAKE_POSITION,direction:p.RIGHT,speed:p.SPEED,fruitPosition:p.FRUIT_POSITION(),isGameOver:!1,isGamePause:!0,score:0,bestScore:0,lastScores:[],isVolume:!0,isMusic:!1,isFull:!1,audioVolume:100},e.audio=new Audio(be),e.goFull=function(t){e.setState((function(e){return{isFull:!e.isFull}})),t.target.blur()},e.moveSnake=function(){if(e.state.isGameOver){clearInterval(e.state.intervalId);var t=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:t,isGameOver:!1,speed:p.SPEED})}var a=Object(c.a)(e.state.snakePosition),s=a[a.length-1];switch(e.state.direction){case p.LEFT:s=[s[0]-p.SPACE_BETWEEN_SNAKE_PIECES,s[1]];break;case p.TOP:s=[s[0],s[1]-p.SPACE_BETWEEN_SNAKE_PIECES];break;case p.RIGHT:s=[s[0]+p.SPACE_BETWEEN_SNAKE_PIECES,s[1]];break;case p.BOTTOM:s=[s[0],s[1]+p.SPACE_BETWEEN_SNAKE_PIECES]}a.push(s),a.shift(),e.setState({snakePosition:a})},e.checkWallSmash=function(){var t=e.state.snakePosition[e.state.snakePosition.length-1];(t[0]<0||t[0]>=p.MAX_POSITION||t[1]<0||t[1]>=p.MAX_POSITION)&&e.isGameOver()},e.checkSnakeBiteItSelf=function(){var t=Object(c.a)(e.state.snakePosition),a=t[t.length-1];t.pop(),t.forEach((function(t){a[0]===t[0]&&a[1]===t[1]&&e.isGameOver()}))},e.checkEatFruit=function(){var t=e.state.snakePosition[e.state.snakePosition.length-1],a=e.state.fruitPosition;if(t[0]===a[0]&&t[1]===a[1]){e.setState((function(t){return t.speed>p.SPEED_FAST?{fruitPosition:p.FRUIT_POSITION(),speed:t.speed-p.SPEED_STEP,score:e.state.snakePosition.length*p.SPEED_STEP}:{fruitPosition:p.FRUIT_POSITION(),speed:t.speed-1,score:t.snakePosition.length*p.SPEED_STEP}})),clearInterval(e.state.intervalId);var s=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:s}),e.snakeGrow(),e.state.isVolume&&(e.audio.currentTime=0,e.audio.volume=e.state.audioVolume/100,e.audio.play())}},e.snakeGrow=function(){var t=Object(c.a)(e.state.snakePosition);t.unshift([]),e.setState({snakePosition:t})},e.isGamePauseToggle=function(){if(e.state.isGamePause)clearInterval(e.state.intervalId),e.setState({isGamePause:!0});else if(!e.state.isGamePause){var t=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:t,isGamePause:!1})}},e.isGameOver=function(){var t=Object(c.a)(e.state.lastScores);t.length>=10?(t.push(e.state.score),t.shift()):t.push(e.state.score),e.setState({snakePosition:p.STARTING_SNAKE_POSITION,direction:p.RIGHT,speed:p.SPEED,isGameOver:!0,lastScores:t}),e.state.score>e.state.bestScore&&(localStorage.setItem("bestScore",e.state.score),e.setState((function(e){return{bestScore:e.score}}))),localStorage.setItem("lastScores",JSON.stringify(t)),clearInterval(e.state.intervalId)},e.startGameHandler=function(t){if(e.state.isGameOver||e.state.isGamePause){var a=setInterval(e.moveSnake,e.state.speed);e.setState({intervalId:a,isGameOver:!1,isGamePause:!1,score:0})}t.target.blur()},e.volumeToggleHandler=function(t){e.setState((function(e){return{isVolume:!e.isVolume}})),t.target.blur()},e.audioVolumeHandler=function(t){e.setState({audioVolume:t}),localStorage.setItem("audioVolume",e.state.audioVolume)},e.musicToggleHandler=function(t){e.setState((function(e){return{isMusic:!e.isMusic}})),t.target.blur()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keydownHandler.bind(this));var e=localStorage.getItem("bestScore")>0?localStorage.getItem("bestScore"):0,t=localStorage.getItem("audioVolume")?localStorage.getItem("audioVolume"):this.state.audioVolume,a=JSON.parse(localStorage.getItem("lastScores"))?JSON.parse(localStorage.getItem("lastScores")):this.state.lastScores;this.setState({bestScore:e,audioVolume:t,lastScores:a})}},{key:"componentDidUpdate",value:function(){this.checkWallSmash(),this.checkSnakeBiteItSelf(),this.checkEatFruit()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"keydownHandler",value:function(e){switch(e.keyCode){case 37:case 65:this.state.direction===p.RIGHT||this.state.isGamePause||this.state.isGameOver||(this.setDirection(p.LEFT),this.moveSnake());break;case 38:case 87:this.state.direction===p.BOTTOM||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:p.TOP}),this.moveSnake());break;case 39:case 68:this.state.direction===p.LEFT||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:p.RIGHT}),this.moveSnake());break;case 40:case 83:this.state.direction===p.TOP||this.state.isGamePause||this.state.isGameOver||(this.setState({direction:p.BOTTOM}),this.moveSnake());break;case 32:this.setState((function(e){return{isGamePause:!e.isGamePause}})),this.isGamePauseToggle()}}},{key:"setDirection",value:function(e){this.setState({direction:e})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:O.a.app,children:[Object(f.jsxs)(h.a,{enabled:this.state.isFull,onChange:function(t){return e.setState({isFull:t})},children:[Object(f.jsx)(q.Provider,{value:{bestScore:this.state.bestScore,audioVolumeHandler:this.audioVolumeHandler,audioVolume:this.state.audioVolume,lastScores:this.state.lastScores},children:Object(f.jsx)(he,{clicked:this.startGameHandler.bind(this),score:this.state.score,isVolume:this.state.isVolume,isMusic:this.state.isMusic,volumeToggle:this.volumeToggleHandler,musicToggle:this.musicToggleHandler,goFull:this.goFull.bind(this),isFull:this.state.isFull})}),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"".concat(O.a.app__field," ").concat(this.state.isFull?O.a.app__fullScreen:null),children:[Object(f.jsx)(v,{snakePosition:this.state.snakePosition,direction:this.state.direction,isGameOver:this.state.isGameOver,size:p.SIZE}),Object(f.jsx)(I,{fruitPosition:this.state.fruitPosition,size:p.SIZE})]})})]}),Object(f.jsx)(_e,{isMusic:this.state.isMusic}),Object(f.jsx)(ve,{})]})}}]),a}(s.Component),ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,135)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,o=t.getLCP,n=t.getTTFB;a(e),s(e),i(e),o(e),n(e)}))};n.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(xe,{})}),document.getElementById("root")),ke()}},[[98,1,2]]]);
//# sourceMappingURL=main.34211d29.chunk.js.map